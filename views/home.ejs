<link rel="stylesheet" href="/css/home.css">
<section class="bg-home">
    <section class="main-home">
        <% if(locals.user) { %>
            <section class="posts">
                <form action="/posts/create" method="post">
                    <textarea name="content" placeholder="Type Here..." required></textarea>
                    <input type="submit" value="Post">
                </form>
            </section>
        <% } %>
        <section class="all-posts">
            <ul>
                <% for(post of posts){ %>
                    <li class="post-card">
                        <div class="heading">
                            <p class="content"><%= post.content %></p>
                            <p class="author">Posted By <%= post.user.name %></p>
                        </div>
                        <div class="comment-box">
                            <% if(locals.user) { %>
                                <form action="/posts/comments/create" method="post">
                                    <input type="text" name="content" placeholder="Comment Here..." required>
                                    <input type="hidden" name="post" value="<%= post._id %>">
                                    <input type="submit" value="Add Comment">
                                </form>
                            <% } %>
                        </div>
                        <ul class="all-comments">
                            <% for(comment of post.comments) { %>
                                <% console.log(post.comments, comment) %>
                                <li class="comment-list-item">
                                    <p class="comment-content"><%= comment.content %></p>
                                    <p class="comment-author">Commented By - <%= comment.user.name %></p>
                                </li>
                            <% } %>
                        </ul>
                    </li>
                <% } %>
            </ul>
        </section>
    </section>
</section>
